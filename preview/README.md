# Preview Directory

This directory contains a self-contained preview version of the KRWL HOF Community Events site.

## What is preview/index.html?

`preview/index.html` is a **single, self-contained HTML file** with:
- All CSS inlined (Leaflet + app styles)
- All JavaScript inlined (Leaflet + i18n + app logic)
- All configuration embedded (from config.preview.json)
- All event data embedded (real + demo events)
- **No external dependencies** - works completely offline

File size: ~260KB

## How to View

### Option 1: Download and Open Locally
1. Download `preview/index.html` from this branch
2. Open it in your browser
3. That's it! Works completely offline.

### Option 2: View on Production Site
1. Merge the preview branch into main
2. The file will be available at: `https://krwl.in/preview/`
3. Production site (main branch) continues working at root

### Option 3: GitHub Raw (Quick View)
Visit: `https://raw.githubusercontent.com/feileberlin/krwl-hof/preview/preview/index.html`
(Note: This may not work perfectly due to CORS, but you can download it)

## How It's Generated

The preview is automatically generated by `.github/workflows/deploy-preview.yml` when you push to the preview branch.

Generation script: `scripts/generate_preview.py` (101 lines, KISS compliant)

## Why Self-Contained?

- **No build artifacts**: Just one HTML file to commit
- **No deployment complexity**: No GitHub Pages artifacts or special deployment
- **Works anywhere**: Local, production, raw GitHub, etc.
- **Fast**: No network requests after initial load
- **Simple**: Easy to understand and maintain

## Comparison to Production

| Feature | Production (main) | Preview (preview branch) |
|---------|------------------|--------------------------|
| Location | Root (/) | /preview/ (when merged) |
| Files | Multiple (static/) | Single (preview/index.html) |
| Config | config.prod.json | Embedded config.preview.json |
| Events | Real only | Real + Demo |
| Debug | OFF | ON |
| Size | ~70KB HTML + assets | ~260KB single file |

## Deployment Flow

```
1. Make changes on preview branch
2. Push to preview branch
   ↓
3. GitHub Action generates preview/index.html
   ↓
4. preview/index.html is committed back to preview branch
   ↓
5. Test by downloading preview/index.html locally
   ↓
6. When ready: Merge preview → main
   ↓
7. Preview becomes available at krwl.in/preview/
   Production continues at krwl.in/
```

## Production Not Affected

The preview branch and preview/index.html do NOT affect production deployment:
- Production deploys from main branch's `static/` directory
- Preview exists in preview branch (until merged)
- Both can coexist on main branch at different paths
